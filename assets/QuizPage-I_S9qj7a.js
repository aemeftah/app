import{u as B,q as V,j as H,K as j,v as A,r as I,z as F,_ as N,B as O,C as E,D as v,J as g,F as R,H as J,E as c,Q as f,L as K,R as L}from"./index-BH-0moDe.js";import{Q as M,a as T}from"./QCard-BCHtUEuD.js";import{Q as G}from"./QPage-Ox6px93r.js";import{u as U}from"./history-BF1nzr9E.js";import{u as W}from"./quiz-PObQG_bd.js";import{u as X}from"./correction-K62kyv9B.js";const y=40,Y=B({name:"QuizPage",__name:"QuizPage",setup(w,{expose:o}){o();const r=W(),e=V({c1:!1,c2:!1,c3:!1,c4:!1});H(()=>{r.getCounter>40&&l.push({name:"serie"}).catch()});const d=(t,s)=>{switch(t){case 1:e.c1=s;break;case 2:e.c2=s;break;case 3:e.c3=s;break;case 4:e.c4=s;break}},C=t=>{n.value.includes(t)?(n.value=n.value.filter(s=>s!==t),d(t,!1)):(n.value.push(t),d(t,!0))},l=j(),k=A(),i=parseInt(`${k.query.id}`),u=U(),n=I([]),b=X();function P(){if(r.counter>=y){if(r.counter>y)return l.push({name:"result",query:{id:i}}).catch();if(r.setQuizResponse(n.value.sort()),Q(),i){const t={id:u.getHistory.length,serie:parseInt(i.toString()),score:u.getScore,datetime:Date.now()};u.setHistory(t)}l.push({name:"result",query:{id:i}}).then(()=>{r.counterIncrement()}).catch()}else r.setQuizResponse(n.value.sort()),r.counterIncrement();z()}function z(){n.value=[],e.c1=!1,e.c2=!1,e.c3=!1,e.c4=!1}const _=(t,s)=>{var m=[],p=[],x=b.getCorrection[s];p=Object.keys(x).map(D=>x[D]);for(var a=0;a<t.length;a++){if(a>=p.length){m.push(!1);continue}if(t[a].length!=p[a].length){m.push(!1);continue}for(var q=!0,h=0;h<t[a].length;h++)if(t[a][h]!=p[a][h]){q=!1;break}m.push(q)}return m},Q=()=>{const t=_(r.getQuizResponse,i);for(var s=0;s<t.length;s++)t[s]||(r.getQuizResponse[s].length==0?u.setResult(`سؤال ${s+1}
  فارغ`):u.setResult(`سؤال ${s+1}
  ${r.getQuizResponse[s].join(", ")}`));u.setScore()},S={quizStore:r,color:e,changeColor:d,onClick:C,router:l,route:k,rid:i,historyStore:u,val:n,maxVal:y,correctionStore:b,onValid:P,onClear:z,compare:_,showResult:Q,get Dark(){return F}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),Z={class:"flex flex-center text-h4 text-weight-bold"},$={class:"flex flex-center justify-evenly q-pt-md"};function ee(w,o,r,e,d,C){return O(),E(G,{class:g(["column justify-evenly",e.Dark.isActive?"bg-dark":"bg-grey-2"])},{default:v(()=>[R("span",Z," السؤال رقم "+J(e.quizStore.getCounter),1),c(T,{class:"my-card q-mx-md"},{default:v(()=>[c(M,null,{default:v(()=>[c(f,{class:g(["full-width q-my-md",e.color.c1==!0?"bg-green":"bg-grey"]),size:"lg",onClick:o[0]||(o[0]=l=>e.onClick(1)),label:"1"},null,8,["class"]),c(f,{class:g(["full-width q-my-md",e.color.c2==!0?"bg-green":"bg-grey"]),size:"lg",onClick:o[1]||(o[1]=l=>e.onClick(2)),label:"2"},null,8,["class"]),K(c(f,{class:g(["full-width q-my-md",e.color.c3==!0?"bg-green":"bg-grey"]),size:"lg",onClick:o[2]||(o[2]=l=>e.onClick(3)),label:"3"},null,8,["class"]),[[L]]),c(f,{class:g(["full-width q-my-md",e.color.c4==!0?"bg-green":"bg-grey"]),size:"lg",onClick:o[3]||(o[3]=l=>e.onClick(4)),label:"4"},null,8,["class"])]),_:1})]),_:1}),R("div",$,[c(f,{size:"lg",padding:"md",color:"negative","icon-right":"clear",outline:"",rounded:"",onClick:e.onClear}),c(f,{size:"lg",padding:"md",color:"positive",rounded:"","icon-right":"check",label:"تاكيد",onClick:e.onValid})])]),_:1},8,["class"])}const ae=N(Y,[["render",ee],["__file","QuizPage.vue"]]);export{ae as default};
