import{c as H,a as d,h as g,b as W,i as X,e as Q,r as x,w as A,o as Y,d as te,l as U,g as M,p as Z,f as oe,j as ee,n as ne,k as le,m as ae,q as O,s as re,t as ie,u as se,v as ue,x as ce,y as de,P as D,z as E,_ as fe,A as ve,B as b,C as B,D as k,E as z,F as C,Q as P,G as L,H as V,I as G,J as he}from"./index-BH-0moDe.js";import{Q as N,s as me,g as ge,a as pe,b as ye,c as j}from"./scroll-CtJXk6DF.js";import{u as be}from"./history-BF1nzr9E.js";import{u as _e}from"./random-DWrUTiq2.js";const F=H({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:c}){const l=d(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>g("div",{class:l.value},W(c.default))}}),we=H({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:c}){const l=d(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>g("div",{class:l.value,role:"toolbar"},W(c.default))}}),Se=H({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:c,emit:l}){const{proxy:{$q:t}}=M(),n=X(U,Q);if(n===Q)return console.error("QHeader needs to be child of QLayout"),Q;const s=x(parseInt(e.heightHint,10)),u=x(!0),f=d(()=>e.reveal===!0||n.view.value.indexOf("H")!==-1||t.platform.is.ios&&n.isContainer.value===!0),p=d(()=>{if(e.modelValue!==!0)return 0;if(f.value===!0)return u.value===!0?s.value:0;const o=s.value-n.scroll.value.position;return o>0?o:0}),r=d(()=>e.modelValue!==!0||f.value===!0&&u.value!==!0),v=d(()=>e.modelValue===!0&&r.value===!0&&e.reveal===!0),_=d(()=>"q-header q-layout__section--marginal "+(f.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(r.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),y=d(()=>{const o=n.rows.value.top,w={};return o[0]==="l"&&n.left.space===!0&&(w[t.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),o[2]==="r"&&n.right.space===!0&&(w[t.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),w});function i(o,w){n.update("header",o,w)}function h(o,w){o.value!==w&&(o.value=w)}function R({height:o}){h(s,o),i("size",o)}function I(o){v.value===!0&&h(u,!0),l("focusin",o)}A(()=>e.modelValue,o=>{i("space",o),h(u,!0),n.animate()}),A(p,o=>{i("offset",o)}),A(()=>e.reveal,o=>{o===!1&&h(u,e.modelValue)}),A(u,o=>{n.animate(),l("reveal",o)}),A(n.scroll,o=>{e.reveal===!0&&h(u,o.direction==="up"||o.position<=e.revealOffset||o.position-o.inflectionPoint<100)});const T={};return n.instances.header=T,e.modelValue===!0&&i("size",s.value),i("space",e.modelValue),i("offset",p.value),Y(()=>{n.instances.header===T&&(n.instances.header=void 0,i("size",0),i("offset",0),i("space",!1))}),()=>{const o=te(c.default,[]);return e.elevated===!0&&o.push(g("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),o.push(g(N,{debounce:0,onResize:R})),g("header",{class:_.value,style:y.value,onFocusin:I},o)}}}),xe=H({name:"QPageContainer",setup(e,{slots:c}){const{proxy:{$q:l}}=M(),t=X(U,Q);if(t===Q)return console.error("QPageContainer needs to be child of QLayout"),Q;Z(oe,!0);const n=d(()=>{const s={};return t.header.space===!0&&(s.paddingTop=`${t.header.size}px`),t.right.space===!0&&(s[`padding${l.lang.rtl===!0?"Left":"Right"}`]=`${t.right.size}px`),t.footer.space===!0&&(s.paddingBottom=`${t.footer.size}px`),t.left.space===!0&&(s[`padding${l.lang.rtl===!0?"Right":"Left"}`]=`${t.left.size}px`),s});return()=>g("div",{class:"q-page-container",style:n.value},W(c.default))}}),{passive:J}=le,ze=["both","horizontal","vertical"],qe=H({name:"QScrollObserver",props:{axis:{type:String,validator:e=>ze.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:me},emits:["scroll"],setup(e,{emit:c}){const l={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let t=null,n,s;A(()=>e.scrollTarget,()=>{p(),f()});function u(){t!==null&&t();const _=Math.max(0,pe(n)),y=ye(n),i={top:_-l.position.top,left:y-l.position.left};if(e.axis==="vertical"&&i.top===0||e.axis==="horizontal"&&i.left===0)return;const h=Math.abs(i.top)>=Math.abs(i.left)?i.top<0?"up":"down":i.left<0?"left":"right";l.position={top:_,left:y},l.directionChanged=l.direction!==h,l.delta=i,l.directionChanged===!0&&(l.direction=h,l.inflectionPoint=l.position),c("scroll",{...l})}function f(){n=ge(s,e.scrollTarget),n.addEventListener("scroll",r,J),r(!0)}function p(){n!==void 0&&(n.removeEventListener("scroll",r,J),n=void 0)}function r(_){if(_===!0||e.debounce===0||e.debounce==="0")u();else if(t===null){const[y,i]=e.debounce?[setTimeout(u,e.debounce),clearTimeout]:[requestAnimationFrame(u),cancelAnimationFrame];t=()=>{i(y),t=null}}}const{proxy:v}=M();return A(()=>v.$q.lang.rtl,u),ee(()=>{s=v.$el.parentNode,f()}),Y(()=>{t!==null&&t(),p()}),Object.assign(v,{trigger:r,getPosition:()=>l}),ne}}),ke=H({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:c,emit:l}){const{proxy:{$q:t}}=M(),n=x(null),s=x(t.screen.height),u=x(e.container===!0?0:t.screen.width),f=x({position:0,direction:"down",inflectionPoint:0}),p=x(0),r=x(ae.value===!0?0:j()),v=d(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),_=d(()=>e.container===!1?{minHeight:t.screen.height+"px"}:null),y=d(()=>r.value!==0?{[t.lang.rtl===!0?"left":"right"]:`${r.value}px`}:null),i=d(()=>r.value!==0?{[t.lang.rtl===!0?"right":"left"]:0,[t.lang.rtl===!0?"left":"right"]:`-${r.value}px`,width:`calc(100% + ${r.value}px)`}:null);function h(a){if(e.container===!0||document.qScrollPrevented!==!0){const m={position:a.position.top,direction:a.direction,directionChanged:a.directionChanged,inflectionPoint:a.inflectionPoint.top,delta:a.delta.top};f.value=m,e.onScroll!==void 0&&l("scroll",m)}}function R(a){const{height:m,width:q}=a;let S=!1;s.value!==m&&(S=!0,s.value=m,e.onScrollHeight!==void 0&&l("scrollHeight",m),T()),u.value!==q&&(S=!0,u.value=q),S===!0&&e.onResize!==void 0&&l("resize",a)}function I({height:a}){p.value!==a&&(p.value=a,T())}function T(){if(e.container===!0){const a=s.value>p.value?j():0;r.value!==a&&(r.value=a)}}let o=null;const w={instances:{},view:d(()=>e.view),isContainer:d(()=>e.container),rootRef:n,height:s,containerHeight:p,scrollbarWidth:r,totalWidth:d(()=>u.value+r.value),rows:d(()=>{const a=e.view.toLowerCase().split(" ");return{top:a[0].split(""),middle:a[1].split(""),bottom:a[2].split("")}}),header:O({size:0,offset:0,space:!1}),right:O({size:300,offset:0,space:!1}),footer:O({size:0,offset:0,space:!1}),left:O({size:300,offset:0,space:!1}),scroll:f,animate(){o!==null?clearTimeout(o):document.body.classList.add("q-body--layout-animate"),o=setTimeout(()=>{o=null,document.body.classList.remove("q-body--layout-animate")},155)},update(a,m,q){w[a][m]=q}};if(Z(U,w),j()>0){let a=function(){S=null,$.classList.remove("hide-scrollbar")},m=function(){if(S===null){if($.scrollHeight>t.screen.height)return;$.classList.add("hide-scrollbar")}else clearTimeout(S);S=setTimeout(a,300)},q=function(K){S!==null&&K==="remove"&&(clearTimeout(S),a()),window[`${K}EventListener`]("resize",m)},S=null;const $=document.body;A(()=>e.container!==!0?"add":"remove",q),e.container!==!0&&q("add"),re(()=>{q("remove")})}return()=>{const a=ie(c.default,[g(qe,{onScroll:h}),g(N,{onResize:R})]),m=g("div",{class:v.value,style:_.value,ref:e.container===!0?void 0:n,tabindex:-1},a);return e.container===!0?g("div",{class:"q-layout-container overflow-hidden",ref:n},[g(N,{onResize:I}),g("div",{class:"absolute-full",style:y.value},[g("div",{class:"scroll",style:i.value},[m])])]):m}}}),Ce=se({__name:"MainLayout",setup(e,{expose:c}){c();const l=ue(),t=be(),n=_e(),s=()=>{n.setMode(!0)},u=ce(),f=de(),p=()=>{f.dark.set(!E.isActive),u.setMode(E.isActive)},r=x(!0),v=x();ee(()=>{const h="standalone"in window.navigator;"getInstalledRelatedApps"in navigator||h?D.getItem("neverShowAppInstallBanner")||(window.addEventListener("beforeinstallprompt",T=>{v.value=T,r.value=!0}),h?f.notify({message:'لتثبيت التطبيق على iOS، يرجى فتح الرابط في متصفح سفاري واستخدام خيار "إضافة إلى الشاشة الرئيسية".',color:"dark",timeout:0,actions:[{label:"موافق",color:"positive",handler:()=>{r.value=!1,D.set("neverShowAppInstallBanner",!0),v.value=null}},{label:"إلغاء",color:"warning",handler:y}]}):f.notify({message:"تثبيت التطبيق اضغط على موافق .",color:"dark",timeout:0,actions:[{label:"موافق",color:"positive",handler:_},{label:"إلغاء",color:"warning",handler:y}]})):f.notify({message:"المرجو فتح الرابط باستعمال متصفح اخر لتثبيت التطبيق",color:"negative",timeout:0,actions:[{icon:"close",color:"white",round:!0,handler:()=>{}}]})});const _=()=>{r.value=!1,v.value&&(v.value.prompt(),v.value.userChoice.then(h=>{h.outcome==="accepted"&&(r.value=!1,D.set("neverShowAppInstallBanner",!0),v.value=null)}))},y=()=>{r.value=!1},i={route:l,historyStore:t,randomStore:n,onCheck:s,modeStore:u,$q:f,onDark:p,showAppInstallBanner:r,deferredPrompt:v,onInstallApp:_,onNeverShowAppInstallBanner:y,get Dark(){return E}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),Ae={class:"flex flex-center justify-evenly"},Te={class:"flex justify-start"},Be={key:0},Pe={key:1},Le={class:"flex flex-center justify-between"},Qe={key:0},He={key:1},Re={key:2},Ie={key:1},Oe={class:"flex flex-center justify-between"};function Ve(e,c,l,t,n,s){const u=ve("router-view");return b(),B(ke,{view:"hHh lpR fFf"},{default:k(()=>[z(Se,{bordered:"",class:he(t.Dark.isActive?"bg-black text-light":"bg-grey-4 text-dark")},{default:k(()=>[z(we,null,{default:k(()=>[t.route.name=="serie"?(b(),B(F,{key:0},{default:k(()=>[C("div",Ae,[c[0]||(c[0]=C("span",null,"مؤسسة مفتاح لتعليم السياقة",-1)),z(P,{color:"bg-light",size:"sm",outline:"",class:"q-mr-sm",icon:"settings",to:"settings"})])]),_:1})):t.route.name=="quiz"?(b(),B(F,{key:1},{default:k(()=>[C("div",Te,[z(P,{"text-color":"light",outline:"",class:"q-mr-sm",size:"sm",icon:"arrow_forward",to:"/"}),t.route.query.id!=="0"?(b(),L("span",Be,"السلسلة رقم "+V(t.route.query.id),1)):(b(),L("span",Pe,"سلسلة عشوائية"))])]),_:1})):t.route.name=="result"?(b(),B(F,{key:2},{default:k(()=>[C("div",Le,[t.route.query.id!=="0"?(b(),L("span",Qe,"السلسلة رقم "+V(t.route.query.id),1)):G("",!0),t.route.query.id!=="0"?(b(),L("span",He,"40/"+V(t.historyStore.getScore),1)):(b(),L("div",Re,[c[1]||(c[1]=C("span",{class:"q-mr-lg"},"سلسلة عشوائية",-1)),C("span",null,[t.randomStore.getMode==!1?(b(),B(P,{key:0,color:"green-5",outline:"",label:"تصحيح",onClick:t.onCheck})):(b(),L("span",Ie,"40/"+V(t.randomStore.getScore),1))])])),z(P,{color:"bg-light",size:"sm",outline:"",icon:"home",to:"/"})])]),_:1})):t.route.name=="settings"?(b(),B(F,{key:3},{default:k(()=>[C("div",Oe,[c[2]||(c[2]=C("span",null,"اعدادات",-1)),z(P,{icon:"light",flat:"",size:"sm",round:"",onClick:t.onDark}),z(P,{color:"bg-light",size:"sm",outline:"",icon:"home",to:"/"})])]),_:1})):G("",!0)]),_:1})]),_:1},8,["class"]),z(xe,null,{default:k(()=>[z(u)]),_:1})]),_:1})}const Ee=fe(Ce,[["render",Ve],["__file","MainLayout.vue"]]);export{Ee as default};
